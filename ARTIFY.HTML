<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Instant Artify - AW Design Studio</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <style>
        /* --- 1. SETUP CSS VARIABLE (Konsisten dengan tema AW Design Studio) --- */
        :root {
            --bg-dark: #09090b;
            --surface-dark: #18181b;
            --surface-light: #27272a;
            --primary-gradient: linear-gradient(135deg, #6366f1 0%, #a855f7 50%, #ec4899 100%);
            --glow: 0 0 20px rgba(168, 85, 247, 0.3);
            --text-main: #ffffff;
            --text-muted: #a1a1aa;
            --border: rgba(255, 255, 255, 0.1);
            --neon-accent: #a855f7;
            --neon-cyan: #00bcd4; /* Aksen untuk upload */
            --error-red: #ef4444; /* Warna merah untuk error */
        }

        * { box-sizing: border-box; font-family: 'Outfit', sans-serif; margin: 0; padding: 0; }

        body {
            background-color: var(--bg-dark);
            background-image: 
                radial-gradient(circle at 50% 0%, rgba(99, 102, 241, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 10% 90%, rgba(236, 72, 153, 0.1) 0%, transparent 40%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            color: var(--text-main);
            padding: 20px;
        }
        
        /* CSS KHUSUS TOMBOL KEMBALI */
        .back-button {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            padding: 8px 12px;
            margin-bottom: 20px;
            background: var(--surface-light);
            color: var(--text-main);
            text-decoration: none;
            border-radius: 8px;
            border: 1px solid var(--border);
            font-size: 14px;
            transition: all 0.2s;
            cursor: pointer;
        }
        .back-button:hover {
            background: rgba(168, 85, 247, 0.1);
            border-color: var(--neon-accent);
            color: var(--neon-accent);
        }

        /* --- 2. CONTAINER UTAMA (CARD) --- */
        .order-card {
            background: rgba(24, 24, 27, 0.8);
            backdrop-filter: blur(24px);
            -webkit-backdrop-filter: blur(24px);
            width: 100%;
            max-width: 500px;
            border-radius: 24px;
            border: 1px solid var(--border);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.6);
            padding: 32px;
            max-height: 95vh; 
            overflow-y: auto;
        }

        /* Header */
        .card-header {
            margin-bottom: 15px;
            /* TAMBAHAN UNTUK MEMBUAT JUDUL DAN DESKRIPSI RATA TENGAH */
            text-align: center; 
        }

        h2.title {
            font-size: 28px;
            font-weight: 700;
            color: var(--neon-accent);
            margin-bottom: 4px;
        }

        p.description {
            font-size: 14px;
            color: var(--text-muted);
            font-weight: 300;
            border-bottom: 1px solid var(--border);
            padding-bottom: 15px;
        }

        /* Sub-Heading */
        .step-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-main);
            margin-bottom: 12px;
            margin-top: 25px;
            /* PASTIKAN STEP TITLE TIDAK RATA TENGAH */
            text-align: left; 
        }

        /* --- 4. SELECTION BUTTONS (JENIS & GAYA) --- */
        .selection-grid {
            display: grid;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        /* 2 Kolom untuk Jenis */
        .type-grid {
             grid-template-columns: repeat(2, 1fr);
        }
        
        /* 3 Kolom untuk Gaya */
        .style-grid {
             grid-template-columns: repeat(3, 1fr);
        }
        
        /* 4 Kolom untuk Rasio */
        .ratio-grid {
             grid-template-columns: repeat(4, 1fr);
        }

        .selection-btn {
            /* Perubahan untuk Rasio agar konten dpt diatur vertikal */
            display: flex; 
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 10px 5px; /* Sesuaikan padding */
            height: auto;
            
            background: var(--surface-dark);
            border: 1px solid var(--border);
            border-radius: 10px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            color: var(--text-muted);
            transition: all 0.2s;
            text-align: center;
        }

        /* Style tambahan untuk konten di dalam tombol rasio */
        .selection-btn svg {
            width: 18px; /* Ukuran ikon rasio */
            height: 18px;
            stroke: currentColor; 
            fill: none;
            margin-bottom: 4px; /* Jarak antara ikon dan teks tebal */
        }
        
        .selection-btn strong { /* Nama Rasio */
            font-size: 12px;
            font-weight: 700;
            color: var(--text-main);
            margin-top: 4px; 
            margin-bottom: 4px; /* SPASI VERTICAL DI SINI */
            line-height: 1.2;
        }
        
        .selection-btn small { /* Penjelasan Rasio */
            font-size: 9px;
            color: var(--text-muted);
            line-height: 1.2;
            height: 30px; /* Tinggi tetap agar tampilan konsisten */
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0 2px;
            font-weight: 400;
        }

        /* Style Active */
        .selection-btn.active {
            border-color: var(--neon-accent); 
            background: rgba(168, 85, 247, 0.1); 
            color: var(--text-main); 
            box-shadow: 0 0 10px rgba(168, 85, 247, 0.3);
        }
        .selection-btn.active strong, .selection-btn.active small {
             color: var(--text-main);
        }

        /* --- 5. TEXTAREA & MAGIC BUTTON & INPUT TEKS BARU --- */
        .prompt-wrapper, .input-group {
            position: relative;
            margin-bottom: 15px;
        }

        textarea, input[type="text"], input[type="tel"] {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--border);
            border-radius: 10px;
            resize: none; 
            font-size: 14px;
            outline: none;
            color: var(--text-main);
            background: var(--surface-dark);
            transition: border-color 0.2s, box-shadow 0.2s;
        }
        
        textarea {
            height: 100px;
            padding-right: 40px; /* Ruang untuk ikon */
        }
        
        input[type="text"], input[type="tel"] {
            height: 44px;
        }

        textarea:focus, input[type="text"]:focus, input[type="tel"]:focus { border-color: var(--neon-accent); }
        textarea::placeholder, input[type="text"]::placeholder, input[type="tel"]::placeholder { color: #71717a; }

        /* Style untuk input yang tidak valid (Kotak Merah) */
        .input-group input.input-invalid {
            border-color: var(--error-red) !important;
            box-shadow: 0 0 5px rgba(239, 68, 68, 0.5);
        }

        /* Style untuk pesan kesalahan */
        .error-message {
            color: var(--error-red);
            font-size: 12px;
            margin-top: 4px;
            display: none; /* Default hidden */
        }
        
        .error-message.visible {
            display: block;
        }

        .magic-icon {
            position: absolute;
            top: 10px; 
            right: 12px;
            color: var(--neon-accent);
            cursor: pointer;
            z-index: 10;
        }

        /* --- 6. ACTION BUTTON --- */
        .btn-process {
            margin-top: 30px;
            width: 100%;
            padding: 16px;
            border: none;
            border-radius: 12px;
            background: var(--primary-gradient);
            color: white;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-process:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 0 30px rgba(168, 85, 247, 0.5);
        }
        
        .btn-process:disabled {
            background: #3f3f46;
            cursor: not-allowed;
            opacity: 0.5;
            box-shadow: none;
        }

    </style>
</head>
<body>

    <div class="order-card">
        
        <a href="MENU LAYANAN.HTML" class="back-button">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m15 18-6-6 6-6"/></svg>
            Kembali ke Menu Utama
        </a>

        <div class="card-header">
            <h2 class="title">Instant Artify</h2>
            <p class="description">Ubah foto Anda menjadi karya seni digital atau karikatur yang keren dalam sekejap. Silahkan isi form di bawah, setelah klik tombol Order, anda akan diarahkan ke Whatsapp untuk konfirmasi pesanan dan kirim file foto yang ingin diedit.</p>
        </div>

        <div class="input-section type-section">
            <h3 class="step-title">1. Pilih Jenis</h3>
            <div class="selection-grid type-grid" data-group="type">
                
                <button class="selection-btn active" data-value="SeniLukis" onclick="selectOption(this, 'type')">Seni Lukis</button>
                <button class="selection-btn" data-value="Karikatur" onclick="selectOption(this, 'type')">Karikatur</button>

            </div>
        </div>

        <div class="input-section style-section">
            <h3 class="step-title">2. Pilih Gaya</h3>
            <div class="selection-grid style-grid" data-group="style">
                
                <button class="selection-btn active" data-value="CatAir" onclick="selectOption(this, 'style')">Cat Air</button>
                <button class="selection-btn" data-value="Impresionis" onclick="selectOption(this, 'style')">Impresionis</button>
                <button class="selection-btn" data-value="DigitalArt" onclick="selectOption(this, 'style')">Digital Art</button>
                
                <button class="selection-btn" data-value="LukisanMinyak" data-value-text="Lukisan Minyak" onclick="selectOption(this, 'style')">Lukisan Minyak</button>
                <button class="selection-btn" data-value="SketsaPensil" onclick="selectOption(this, 'style')">Sketsa Pensil</button>
                <button class="selection-btn" data-value="Kustom" onclick="selectOption(this, 'style')">Kustom</button>
            </div>
        </div>

        <div class="input-section instruction-section">
            <h3 class="step-title">3. Instruksi (Opsional)</h3>
            <div class="prompt-wrapper">
                <textarea id="prompt-input" placeholder="Contoh: tambahkan latar belakang taman bunga, buat ekspresi wajah lebih ceria..."></textarea>
                <div class="magic-icon" onclick="autoFillPrompt()">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2L14.4 9.6L22 12L14.4 14.4L12 22L9.6 14.4L2 12L9.6 9.6L12 2Z"></path></svg>
                </div>
            </div>
        </div>

        <div class="input-section ratio-section">
            <h3 class="step-title">4. Pilih Rasio</h3>
            <div class="selection-grid ratio-grid" data-group="ratio">
                
                <button class="selection-btn active" data-value="1:1" onclick="selectOption(this, 'ratio')">
                    <svg viewBox="0 0 24 24" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2" /></svg>
                    <strong>1:1</strong>
                    <small>Cocok untuk Feed IG/FB atau Foto Profil.</small>
                </button>
                
                <button class="selection-btn" data-value="3:4" onclick="selectOption(this, 'ratio')">
                    <svg viewBox="0 0 24 24" stroke-width="2"><rect x="7" y="3" width="10" height="18" rx="2" /></svg>
                    <strong>3:4</strong>
                    <small>Ideal untuk cetak foto bingkai standar (Frame Photo).</small>
                </button>

                <button class="selection-btn" data-value="16:9" onclick="selectOption(this, 'ratio')">
                    <svg viewBox="0 0 24 24" stroke-width="2"><rect x="2" y="5" width="20" height="14" rx="2" /></svg>
                    <strong>16:9</strong>
                    <small>Sempurna untuk Website Banner, Thumbnail YouTube, atau Wallpaper.</small>
                </button>

                <button class="selection-btn" data-value="9:16" onclick="selectOption(this, 'ratio')">
                    <svg viewBox="0 0 24 24" stroke-width="2"><rect x="5" y="2" width="14" height="20" rx="2" /></svg>
                    <strong>9:16</strong>
                    <small>Cocok untuk Stories/Reels IG, TikTok, atau Mobile Wallpaper.</small>
                </button>

            </div>
        </div>
        
        <div class="input-section contact-section">
            <h3 class="step-title">5. Data Pemesan</h3>
            
            <div class="input-group">
                <input type="text" id="nama-lengkap" placeholder="Nama Lengkap Anda (Min. 3 Karakter)" minlength="3" required>
                <span class="error-message" id="error-nama">Nama harus diisi minimal 3 karakter.</span>
            </div>
            
            <div class="input-group">
                <input type="tel" id="nomor-whatsapp" placeholder="Nomor WhatsApp (Diawali 08, Min. 10 Digit)" pattern="08[0-9]{8,}" required>
                <span class="error-message" id="error-wa">Nomor WA harus diawali '08' dan minimal 10 digit.</span>
            </div>
        </div>
        
        <button class="btn-process" id="btn-process" disabled>
            Klik untuk Order
        </button>

    </div>

    <script>
        const btnProcess = document.getElementById('btn-process');
        const promptInput = document.getElementById('prompt-input');
        const namaInput = document.getElementById('nama-lengkap');
        const waInput = document.getElementById('nomor-whatsapp');
        
        // Element pesan error
        const errorNama = document.getElementById('error-nama');
        const errorWA = document.getElementById('error-wa');
        
        // Nomor WhatsApp tujuan
        const targetWA = "6285133748005"; 
        
        function selectOption(selectedButton, groupName) {
            const parent = selectedButton.closest('.selection-grid');
            const buttons = parent.querySelectorAll('.selection-btn');
            buttons.forEach(btn => btn.classList.remove('active'));
            selectedButton.classList.add('active');
            
            checkCompleteness();
        }

        function autoFillPrompt() {
            promptInput.value = "Ubah foto menjadi lukisan minyak bergaya abad ke-19 dengan fokus pada warna hangat.";
            promptInput.dispatchEvent(new Event('input')); 
        }
        
        // Fungsi validasi kustom
        function validateInputs() {
            const nama = namaInput.value.trim();
            const wa = waInput.value.trim();
            
            // 1. Validasi Nama: Minimal 3 karakter
            const isNameValid = nama.length >= 3;
            
            // 2. Validasi WA: Harus match pattern (diawali 08, minimal 10 digit total)
            const waPattern = /^08[0-9]{8,}$/; 
            const isWAValid = waPattern.test(wa);
            
            // Tampilkan/sembunyikan feedback visual
            toggleValidationFeedback(namaInput, errorNama, isNameValid, "Nama harus diisi minimal 3 karakter.");
            toggleValidationFeedback(waInput, errorWA, isWAValid, "Nomor WA harus diawali '08' dan minimal 10 digit.");

            return { isNameValid, isWAValid };
        }

        function toggleValidationFeedback(inputElement, errorElement, isValid, errorMessage) {
            if (inputElement.value.trim() === '') {
                // Jangan tampilkan error jika input kosong, cukup hapus kelas invalid
                inputElement.classList.remove('input-invalid');
                errorElement.classList.remove('visible');
                return;
            }

            if (isValid) {
                inputElement.classList.remove('input-invalid');
                errorElement.classList.remove('visible');
            } else {
                inputElement.classList.add('input-invalid');
                errorElement.textContent = errorMessage;
                errorElement.classList.add('visible');
            }
        }

        function checkCompleteness() {
            const isTypeSelected = document.querySelector('.selection-grid[data-group="type"] .selection-btn.active') !== null;
            const isStyleSelected = document.querySelector('.selection-grid[data-group="style"] .selection-btn.active') !== null;
            
            const { isNameValid, isWAValid } = validateInputs();
            
            // Tombol hanya aktif jika Jenis, Gaya, Nama valid, dan WA valid
            if (isTypeSelected && isStyleSelected && isNameValid && isWAValid) {
                btnProcess.disabled = false;
            } else {
                btnProcess.disabled = true;
            }
        }
        
        // --- LOGIKA BARU UNTUK TOMBOL "KLIK UNTUK ORDER" ---
        btnProcess.addEventListener('click', function(event) {
            
            // Lakukan validasi terakhir dan paksa feedback visual
            const { isNameValid, isWAValid } = validateInputs();

            if (!isNameValid || !isWAValid) {
                // Scroll ke bagian contact section
                document.querySelector('.contact-section').scrollIntoView({ behavior: 'smooth', block: 'center' });
                alert("Mohon lengkapi atau perbaiki data pemesan yang ditandai.");
                return;
            }

            // Jika tombol tidak disabled (berarti semua sudah divalidasi dan valid)
            if (!btnProcess.disabled) {
                const namaLengkap = namaInput.value.trim();
                const nomorWA = waInput.value.trim();
                
                // Ambil nilai teks dari tombol yang aktif, bukan data-value
                const selectedType = document.querySelector('.selection-grid[data-group="type"] .selection-btn.active').textContent.trim();
                const selectedStyle = document.querySelector('.selection-grid[data-group="style"] .selection-btn.active').textContent.trim();
                
                // Ambil teks dari elemen strong (untuk rasio)
                const selectedRatioElement = document.querySelector('.selection-grid[data-group="ratio"] .selection-btn.active strong');
                const selectedRatio = selectedRatioElement ? selectedRatioElement.textContent.trim() : 'N/A';
                
                // Ambil instruksi, jika kosong beri label T/A
                let instruksi = promptInput.value.trim();
                const instruksiTampil = instruksi || "T/A";
                
                // Format data untuk disimpan/dicatat (Contoh log di console)
                const orderData = {
                    nama: namaLengkap,
                    whatsapp: nomorWA,
                    jenis: selectedType,
                    gaya: selectedStyle,
                    rasio: selectedRatio,
                    instruksi: instruksi,
                    timestamp: new Date().toISOString()
                };
                
                console.log("--- ORDER TERSIMPAN (simulasi database) ---");
                console.log(orderData);
                
                // FORMAT PESAN WHATSAPP DENGAN BARIS BARU DAN LABEL JELAS
                let waMessage = `Halo saya ${namaLengkap}, baru saja order *ARTIFY*.\n\n*Detail Order:*\n*Jenis:* ${selectedType}\n*Gaya:* ${selectedStyle}\n*Rasio:* ${selectedRatio}\n*Instruksi:* ${instruksiTampil}\n\nFile foto akan segera saya kirim ke sini. Mohon segera diproses ya, Terima kasih!`;
                
                // Encode pesan untuk URL
                const encodedMessage = encodeURIComponent(waMessage);
                
                // Buka link WhatsApp (akan membuka tab/aplikasi baru)
                window.open(`https://wa.me/${targetWA}?text=${encodedMessage}`, '_blank');
                
                // Opsional: Beri feedback ke user
                alert("Order Anda telah tercatat. Silakan lanjutkan di WhatsApp untuk mengirimkan foto!");
                
                // KEMBALI KE MENU LAYANAN.HTML setelah order selesai
                window.location.href = "MENU LAYANAN.HTML";
            }
        });
        
        document.addEventListener('DOMContentLoaded', checkCompleteness);
        
        // Tambahkan event listener untuk input teks agar tombol terupdate dan feedback ditampilkan secara realtime
        namaInput.addEventListener('input', checkCompleteness);
        waInput.addEventListener('input', checkCompleteness);
        promptInput.addEventListener('input', checkCompleteness);

    </script>
</body>
</html>
